<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTL Warranty Analysis Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e4e4e4;
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Password Overlay */
        .password-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .password-box {
            background: linear-gradient(145deg, #1e3a5f, #1a2d47);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            border: 1px solid rgba(79, 195, 247, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        
        .password-box h2 {
            color: #4fc3f7;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .password-box p {
            color: #90a4ae;
            margin-bottom: 25px;
            font-size: 0.9rem;
        }
        
        .password-box input {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(0,0,0,0.3);
            color: #e4e4e4;
            font-size: 1rem;
            margin-bottom: 20px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .password-box input:focus {
            border-color: #4fc3f7;
        }
        
        .password-box button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(145deg, #4fc3f7, #29b6f6);
            border: none;
            border-radius: 8px;
            color: #1a1a2e;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .password-box button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(79, 195, 247, 0.4);
        }
        
        .password-error {
            color: #e57373;
            font-size: 0.85rem;
            margin-top: 15px;
            display: none;
        }
        
        .hidden {
            display: none !important;
        }
        
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #4fc3f7;
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .subtitle {
            text-align: center;
            color: #90a4ae;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }
        
        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background: linear-gradient(145deg, #1e3a5f, #1a2d47);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(79, 195, 247, 0.2);
        }
        
        .kpi-card.warning {
            border-color: rgba(255, 152, 0, 0.4);
            background: linear-gradient(145deg, #3d2e1f, #2d2518);
        }
        
        .kpi-card.success {
            border-color: rgba(76, 175, 80, 0.4);
            background: linear-gradient(145deg, #1e3d2b, #1a2d22);
        }
        
        .kpi-card.danger {
            border-color: rgba(244, 67, 54, 0.4);
            background: linear-gradient(145deg, #3d1f1f, #2d1818);
        }
        
        .kpi-card.purple {
            border-color: rgba(186, 104, 200, 0.4);
            background: linear-gradient(145deg, #2d1f3d, #251833);
        }
        
        .kpi-value {
            font-size: 2rem;
            font-weight: bold;
            color: #4fc3f7;
        }
        
        .kpi-card.warning .kpi-value { color: #ffb74d; }
        .kpi-card.success .kpi-value { color: #81c784; }
        .kpi-card.danger .kpi-value { color: #e57373; }
        .kpi-card.purple .kpi-value { color: #ba68c8; }
        
        .kpi-label {
            font-size: 0.85rem;
            color: #90a4ae;
            margin-top: 5px;
        }
        
        /* Chart Grid */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: linear-gradient(145deg, #1e3a5f, #1a2d47);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(79, 195, 247, 0.1);
        }
        
        .chart-container h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1rem;
            text-align: center;
        }
        
        .chart-wrapper {
            position: relative;
            height: 300px;
        }
        
        .chart-wrapper.tall {
            height: 400px;
        }
        
        /* Tables */
        .table-container {
            background: linear-gradient(145deg, #1e3a5f, #1a2d47);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(79, 195, 247, 0.1);
            margin-bottom: 25px;
            overflow-x: auto;
        }
        
        .table-container h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        
        th, td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(79, 195, 247, 0.1);
        }
        
        th {
            background: rgba(79, 195, 247, 0.1);
            color: #4fc3f7;
            font-weight: 600;
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background: rgba(79, 195, 247, 0.05);
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .badge-danger { background: rgba(244, 67, 54, 0.2); color: #e57373; }
        .badge-warning { background: rgba(255, 152, 0, 0.2); color: #ffb74d; }
        .badge-success { background: rgba(76, 175, 80, 0.2); color: #81c784; }
        
        /* Insights Section */
        .insights {
            background: linear-gradient(145deg, #1e3a5f, #1a2d47);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid rgba(79, 195, 247, 0.1);
            margin-bottom: 25px;
        }
        
        .insights h3 {
            color: #4fc3f7;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .insight-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        
        .insight-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            min-width: 30px;
        }
        
        .insight-text h4 {
            color: #e4e4e4;
            font-size: 0.95rem;
            margin-bottom: 5px;
        }
        
        .insight-text p {
            color: #90a4ae;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        /* Tabs for tables */
        .tab-container {
            margin-bottom: 25px;
        }
        
        .tab-buttons {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: rgba(79, 195, 247, 0.1);
            border: 1px solid rgba(79, 195, 247, 0.2);
            color: #90a4ae;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
        }
        
        .tab-btn:hover {
            background: rgba(79, 195, 247, 0.2);
        }
        
        .tab-btn.active {
            background: rgba(79, 195, 247, 0.3);
            color: #4fc3f7;
            border-color: #4fc3f7;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            color: #546e7a;
            font-size: 0.8rem;
            margin-top: 30px;
            padding: 20px;
        }
        
        @media (max-width: 768px) {
            .chart-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .kpi-value {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Password Overlay -->
    <div class="password-overlay" id="passwordOverlay">
        <div class="password-box">
            <h2>üîê CTL Warranty Dashboard</h2>
            <p>Enter the password to access the warranty analysis data</p>
            <input type="password" id="passwordInput" placeholder="Enter password..." onkeypress="if(event.key==='Enter')checkPassword()">
            <button onclick="checkPassword()">Access Dashboard</button>
            <p class="password-error" id="passwordError">Incorrect password. Please try again.</p>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard hidden" id="dashboard">
        <h1>üìä CTL Warranty Analysis Dashboard</h1>
        <p class="subtitle">Repair Data 2023-2025 for over 1000 units sold - NL72 / PX11E Devices and Newer</p>
        
        <!-- KPI Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-value" id="kpiUnitsSold">-</div>
                <div class="kpi-label">Total Units Sold</div>
            </div>
            <div class="kpi-card warning">
                <div class="kpi-value" id="kpiTotalRepairs">-</div>
                <div class="kpi-label">Total Repairs</div>
            </div>
            <div class="kpi-card danger">
                <div class="kpi-value" id="kpiRepairRate">-</div>
                <div class="kpi-label">Overall Repair Rate</div>
            </div>
            <div class="kpi-card warning">
                <div class="kpi-value" id="kpiTotalCost">-</div>
                <div class="kpi-label">Est. Total Repair Cost</div>
            </div>
            <div class="kpi-card purple">
                <div class="kpi-value" id="kpiAccidental">-</div>
                <div class="kpi-label">Accidental Damage %</div>
            </div>
            <div class="kpi-card success">
                <div class="kpi-value" id="kpiInWarranty">-</div>
                <div class="kpi-label">In Warranty %</div>
            </div>
        </div>
        
        <!-- Charts Row 1 -->
        <div class="chart-grid">
            <div class="chart-container">
                <h3>üìà Repair Rate by Model (Highest to Lowest)</h3>
                <div class="chart-wrapper tall">
                    <canvas id="repairRateChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>üí∞ Estimated Repair Cost by Model (Top 15)</h3>
                <div class="chart-wrapper tall">
                    <canvas id="costByModelChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Charts Row 2 -->
        <div class="chart-grid">
            <div class="chart-container">
                <h3>üîß Repair Type Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="repairTypeChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>üíµ Cost Breakdown by Repair Type</h3>
                <div class="chart-wrapper">
                    <canvas id="costChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Charts Row 3 -->
        <div class="chart-grid">
            <div class="chart-container">
                <h3>‚ö†Ô∏è Accidental Damage Rate by Model</h3>
                <div class="chart-wrapper tall">
                    <canvas id="accidentalChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <h3>üìã Warranty Status Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="warrantyChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Insights Section -->
        <div class="insights">
            <h3>üîç Key Insights & Analysis</h3>
            <div id="insightsList"></div>
        </div>
        
        <!-- Data Tables -->
        <div class="table-container">
            <h3>üìä Model Analysis Tables</h3>
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('worstTab')">‚ö†Ô∏è Highest Repair Rate</button>
                <button class="tab-btn" onclick="showTab('bestTab')">‚úÖ Most Reliable</button>
                <button class="tab-btn" onclick="showTab('costTab')">üí∞ Highest Cost</button>
                <button class="tab-btn" onclick="showTab('accidentalTab')">üí• Accidental Damage</button>
                <button class="tab-btn" onclick="showTab('warrantyTab')">üìã Warranty Status</button>
                <button class="tab-btn" onclick="showTab('allTab')">üìÑ All Models</button>
            </div>
            
            <div id="worstTab" class="tab-content active">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Item #</th>
                            <th>Units Sold</th>
                            <th>Total Repairs</th>
                            <th>Repair Rate</th>
                            <th>Est. Cost</th>
                        </tr>
                    </thead>
                    <tbody id="worstTable"></tbody>
                </table>
            </div>
            
            <div id="bestTab" class="tab-content">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Item #</th>
                            <th>Units Sold</th>
                            <th>Total Repairs</th>
                            <th>Repair Rate</th>
                            <th>Est. Cost</th>
                        </tr>
                    </thead>
                    <tbody id="bestTable"></tbody>
                </table>
            </div>
            
            <div id="costTab" class="tab-content">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Units Sold</th>
                            <th>Total Repairs</th>
                            <th>Repair Rate</th>
                            <th>Est. Total Cost</th>
                        </tr>
                    </thead>
                    <tbody id="costTable"></tbody>
                </table>
            </div>
            
            <div id="accidentalTab" class="tab-content">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Accidental Repairs</th>
                            <th>Total Repairs</th>
                            <th>Accidental %</th>
                        </tr>
                    </thead>
                    <tbody id="accidentalTable"></tbody>
                </table>
            </div>
            
            <div id="warrantyTab" class="tab-content">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>In Warranty</th>
                            <th>Out of Warranty</th>
                            <th>In Warranty %</th>
                            <th>Out of Warranty %</th>
                        </tr>
                    </thead>
                    <tbody id="warrantyTable"></tbody>
                </table>
            </div>
            
            <div id="allTab" class="tab-content">
                <table>
                    <thead>
                        <tr>
                            <th>Model</th>
                            <th>Item #</th>
                            <th>Units Sold</th>
                            <th>Major</th>
                            <th>Minor</th>
                            <th>NPU/NPF</th>
                            <th>Accidental</th>
                            <th>Total</th>
                            <th>Repair Rate</th>
                            <th>Est. Cost</th>
                        </tr>
                    </thead>
                    <tbody id="allTable"></tbody>
                </table>
            </div>
        </div>
        
        <div class="footer">
            CTL Warranty Analysis Dashboard | Data: 2023-2025 | Generated February 2026<br>
            Filtered: Models with >1000 units sold | Excluded: NL71 and NL81 models
        </div>
    </div>

    <script>
        // Password check function
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            const correctPassword = 'CTLdata20232026';
            
            if (password === correctPassword) {
                document.getElementById('passwordOverlay').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                initDashboard();
            } else {
                document.getElementById('passwordError').style.display = 'block';
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }
        
        function initDashboard() {
            // Model data - filtered for >1000 units, excluding NL71/NL81
            const warrantyData = [
                { model: "CTL Chromebook VX11 4/32", item: "CBUS1100004", sold: 15831, major: 94, minor: 204, npu: 22, accidental: 215, total: 320, inWarranty: 27, outWarranty: 306 },
                { model: "CTL Chromebook NL72TW/8/64 CBU", item: "CBUS1100011", sold: 35388, major: 1183, minor: 2479, npu: 682, accidental: 1801, total: 4344, inWarranty: 4306, outWarranty: 348 },
                { model: "CTL Chromebook NL72-L 4/64 LTE", item: "CBUS1100013", sold: 1679, major: 83, minor: 235, npu: 33, accidental: 194, total: 351, inWarranty: 310, outWarranty: 77 },
                { model: "CTL Chromebook PX11E 4/32", item: "CBUS1100014", sold: 13940, major: 312, minor: 580, npu: 179, accidental: 681, total: 1071, inWarranty: 571, outWarranty: 500 },
                { model: "CTL Chromebook PX11E 4/32-180", item: "CBUS1100014A", sold: 1983, major: 160, minor: 167, npu: 43, accidental: 227, total: 370, inWarranty: 319, outWarranty: 56 },
                { model: "CTL Chromebook NL72 N5100 8/64", item: "CBUS1100015", sold: 23614, major: 699, minor: 1283, npu: 369, accidental: 929, total: 2351, inWarranty: 1563, outWarranty: 998 },
                { model: "CTL Chromebook NL72 4/64", item: "CBUS1100016", sold: 22714, major: 221, minor: 495, npu: 107, accidental: 380, total: 823, inWarranty: 707, outWarranty: 196 },
                { model: "CTL Chromebook NL72T N4500 4/64", item: "CBUS1100017", sold: 37181, major: 1334, minor: 2045, npu: 682, accidental: 2086, total: 4061, inWarranty: 3921, outWarranty: 343 },
                { model: "CTL Chromebook NL72-L 4/64 LTE", item: "CBUS1100019", sold: 7883, major: 2, minor: 14, npu: 1, accidental: 0, total: 17, inWarranty: 13, outWarranty: 1 },
                { model: "CTL Chromebook NL72CT-L 4/64 LTE", item: "CBUS1100020", sold: 56259, major: 1608, minor: 1554, npu: 197, accidental: 1790, total: 3359, inWarranty: 3435, outWarranty: 139 },
                { model: "CTL Chromebook NL72CT", item: "CBUS1100021", sold: 2994, major: 155, minor: 181, npu: 53, accidental: 248, total: 389, inWarranty: 365, outWarranty: 58 },
                { model: "CTL Chromebook PX11E 4/64", item: "CBUS1100022", sold: 20981, major: 448, minor: 407, npu: 123, accidental: 456, total: 978, inWarranty: 976, outWarranty: 50 },
                { model: "CTL Chromebook NL73/8 N100 8/64", item: "CBUS1100024", sold: 24195, major: 231, minor: 255, npu: 52, accidental: 284, total: 538, inWarranty: 458, outWarranty: 126 },
                { model: "CTL Chromebook NL73TW N100 360", item: "CBUS1100025", sold: 35933, major: 273, minor: 538, npu: 143, accidental: 484, total: 954, inWarranty: 979, outWarranty: 43 },
                { model: "CTL Chromebook NL73CT N100 8/64", item: "CBUS1100026", sold: 13093, major: 134, minor: 179, npu: 22, accidental: 162, total: 335, inWarranty: 336, outWarranty: 33 },
                { model: "CTL Chromebook NL73T N100 360", item: "CBUS1100027", sold: 3481, major: 28, minor: 59, npu: 17, accidental: 39, total: 104, inWarranty: 104, outWarranty: 7 },
                { model: "CTL Chromebook NL73 N100 4/64", item: "CBUS1100028", sold: 11992, major: 51, minor: 55, npu: 18, accidental: 43, total: 124, inWarranty: 114, outWarranty: 36 },
                { model: "CTL Chromebook PX111E 4/64", item: "CBUS1100033", sold: 12330, major: 110, minor: 56, npu: 26, accidental: 73, total: 192, inWarranty: 202, outWarranty: 10 },
                { model: "CTL Chromebook PX111E 8/64", item: "CBUS1100034", sold: 5509, major: 95, minor: 60, npu: 24, accidental: 84, total: 179, inWarranty: 216, outWarranty: 7 },
                { model: "CTL NL73TW Chromebook Gen2", item: "CBUS1100035", sold: 3346, major: 3, minor: 8, npu: 3, accidental: 6, total: 14, inWarranty: 18, outWarranty: 0 },
                { model: "CTL NL73 Chromebook Gen2", item: "CBUS1100037", sold: 3632, major: 6, minor: 4, npu: 1, accidental: 8, total: 11, inWarranty: 13, outWarranty: 0 },
                { model: "CTL Chromebook PX14E 14\" HD", item: "CBUS1400003", sold: 6573, major: 597, minor: 401, npu: 164, accidental: 697, total: 1162, inWarranty: 1122, outWarranty: 167 },
                { model: "CTL Chromebook PX14EX 14\" FHD", item: "CBUS1400004", sold: 3511, major: 57, minor: 93, npu: 23, accidental: 66, total: 173, inWarranty: 169, outWarranty: 27 },
                { model: "CTL Chromebook PX14EXT 14\" Touch", item: "CBUS1400005", sold: 2475, major: 149, minor: 104, npu: 41, accidental: 164, total: 294, inWarranty: 296, outWarranty: 8 },
                { model: "CTL PX14EXT 14\" TS 8/64-N6000", item: "CBUS1400007", sold: 1495, major: 13, minor: 13, npu: 5, accidental: 10, total: 31, inWarranty: 38, outWarranty: 1 },
                { model: "CTL PX14EXT 14\" TS 8/128-N6000", item: "CBUS1400009", sold: 1055, major: 21, minor: 19, npu: 7, accidental: 22, total: 47, inWarranty: 49, outWarranty: 3 },
                { model: "CTL Chromebook PX141E N100 8/64", item: "CBUS1400011", sold: 10859, major: 89, minor: 35, npu: 23, accidental: 73, total: 147, inWarranty: 141, outWarranty: 18 },
                { model: "CTL Chromebook PX141EXT", item: "CBUS1400012", sold: 5009, major: 15, minor: 9, npu: 5, accidental: 8, total: 29, inWarranty: 39, outWarranty: 1 },
                { model: "CTL Chromebook PX141GX", item: "CBUS1400013", sold: 1530, major: 5, minor: 3, npu: 1, accidental: 5, total: 9, inWarranty: 11, outWarranty: 1 },
                { model: "CTL Chromebook PX141GXT", item: "CBUS1400015", sold: 3062, major: 11, minor: 12, npu: 3, accidental: 7, total: 26, inWarranty: 28, outWarranty: 1 },
                { model: "CTL Chromebox CBx2 4/64 5205U", item: "CBXUS190003", sold: 15709, major: 12, minor: 10, npu: 3, accidental: 0, total: 25, inWarranty: 27, outWarranty: 0 },
                { model: "CTL Chromebox CBx2-7 8/128", item: "CBXUS190004", sold: 1420, major: 4, minor: 2, npu: 1, accidental: 0, total: 7, inWarranty: 5, outWarranty: 2 },
                { model: "CTL Google Meet GQE15C System", item: "CBXUS190005", sold: 13042, major: 51, minor: 88, npu: 6, accidental: 0, total: 145, inWarranty: 157, outWarranty: 0 },
                { model: "CTL Chromebox CBx3 Cel 7305", item: "CBXUS190010", sold: 7369, major: 11, minor: 17, npu: 5, accidental: 0, total: 33, inWarranty: 35, outWarranty: 0 },
                { model: "CTL Chromebox CBx3-7 i7-1355U", item: "CBXUS190011", sold: 1016, major: 4, minor: 5, npu: 2, accidental: 0, total: 11, inWarranty: 12, outWarranty: 0 },
                { model: "CTL Meet Compute System (GQE20C)", item: "CBXUS190020", sold: 6152, major: 30, minor: 33, npu: 9, accidental: 0, total: 72, inWarranty: 80, outWarranty: 0 },
                { model: "CTL Chrome Tablet Tx1 4GB/32", item: "NBCTX1", sold: 4257, major: 10, minor: 5, npu: 4, accidental: 8, total: 19, inWarranty: 8, outWarranty: 12 }
            ];
            
            // Calculate derived metrics
            warrantyData.forEach(d => {
                d.repairRate = ((d.total / d.sold) * 100).toFixed(2);
                d.totalCost = (d.major * 100) + (d.minor * 50) + (d.npu * 20);
                d.accidentalPct = d.total > 0 ? ((d.accidental / d.total) * 100).toFixed(2) : 0;
                d.inWarrantyPct = (d.inWarranty + d.outWarranty) > 0 ? 
                    ((d.inWarranty / (d.inWarranty + d.outWarranty)) * 100).toFixed(2) : 0;
                d.outWarrantyPct = (d.inWarranty + d.outWarranty) > 0 ? 
                    ((d.outWarranty / (d.inWarranty + d.outWarranty)) * 100).toFixed(2) : 0;
                d.shortName = d.model.replace('CTL Chromebook ', '').replace('CTL ', '').substring(0, 20);
            });
            
            // Calculate totals
            const totalSold = warrantyData.reduce((sum, d) => sum + d.sold, 0);
            const totalRepairs = warrantyData.reduce((sum, d) => sum + d.total, 0);
            const totalMajor = warrantyData.reduce((sum, d) => sum + d.major, 0);
            const totalMinor = warrantyData.reduce((sum, d) => sum + d.minor, 0);
            const totalNPU = warrantyData.reduce((sum, d) => sum + d.npu, 0);
            const totalAccidental = warrantyData.reduce((sum, d) => sum + d.accidental, 0);
            const totalInWarranty = warrantyData.reduce((sum, d) => sum + d.inWarranty, 0);
            const totalOutWarranty = warrantyData.reduce((sum, d) => sum + d.outWarranty, 0);
            const totalCost = warrantyData.reduce((sum, d) => sum + d.totalCost, 0);
            
            // Update KPIs
            document.getElementById('kpiUnitsSold').textContent = totalSold.toLocaleString();
            document.getElementById('kpiTotalRepairs').textContent = totalRepairs.toLocaleString();
            document.getElementById('kpiRepairRate').textContent = ((totalRepairs / totalSold) * 100).toFixed(2) + '%';
            document.getElementById('kpiTotalCost').textContent = '$' + totalCost.toLocaleString();
            document.getElementById('kpiAccidental').textContent = ((totalAccidental / totalRepairs) * 100).toFixed(1) + '%';
            document.getElementById('kpiInWarranty').textContent = ((totalInWarranty / (totalInWarranty + totalOutWarranty)) * 100).toFixed(1) + '%';
            
            // Sort data for different views
            const byRepairRate = [...warrantyData].sort((a, b) => parseFloat(b.repairRate) - parseFloat(a.repairRate));
            const byReliable = [...warrantyData].sort((a, b) => parseFloat(a.repairRate) - parseFloat(b.repairRate));
            const byCost = [...warrantyData].sort((a, b) => b.totalCost - a.totalCost);
            const byAccidental = [...warrantyData].filter(d => d.total > 0).sort((a, b) => parseFloat(b.accidentalPct) - parseFloat(a.accidentalPct));
            
            // Chart colors
            const redGradient = byRepairRate.map((_, i) => {
                const ratio = i / byRepairRate.length;
                return `rgba(${229 - ratio * 80}, ${115 + ratio * 80}, ${115 + ratio * 80}, 0.8)`;
            });
            
            const greenGradient = byReliable.slice(0, 15).map((_, i) => {
                const ratio = i / 15;
                return `rgba(${129 + ratio * 50}, ${199 - ratio * 50}, ${132 + ratio * 50}, 0.8)`;
            });
            
            const purpleGradient = byAccidental.slice(0, 15).map((_, i) => {
                const ratio = i / 15;
                return `rgba(${186 - ratio * 40}, ${104 + ratio * 40}, ${200 - ratio * 40}, 0.8)`;
            });
            
            // Repair Rate Chart
            new Chart(document.getElementById('repairRateChart'), {
                type: 'bar',
                data: {
                    labels: byRepairRate.slice(0, 15).map(d => d.shortName),
                    datasets: [{
                        label: 'Repair Rate %',
                        data: byRepairRate.slice(0, 15).map(d => parseFloat(d.repairRate)),
                        backgroundColor: redGradient.slice(0, 15),
                        borderColor: redGradient.slice(0, 15),
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const d = byRepairRate[context.dataIndex];
                                    return `Sold: ${d.sold.toLocaleString()} | Repairs: ${d.total.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Repair Rate (%)', color: '#90a4ae' },
                            ticks: { color: '#90a4ae' },
                            grid: { color: 'rgba(79, 195, 247, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#e4e4e4', font: { size: 11 } },
                            grid: { display: false }
                        }
                    }
                }
            });
            
            // Cost by Model Chart
            new Chart(document.getElementById('costByModelChart'), {
                type: 'bar',
                data: {
                    labels: byCost.slice(0, 15).map(d => d.shortName),
                    datasets: [{
                        label: 'Total Cost ($)',
                        data: byCost.slice(0, 15).map(d => d.totalCost),
                        backgroundColor: '#ffb74d',
                        borderColor: '#ff9800',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Cost: $' + context.raw.toLocaleString();
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Total Repair Cost ($)', color: '#90a4ae' },
                            ticks: { 
                                color: '#90a4ae',
                                callback: value => '$' + (value/1000).toFixed(0) + 'K'
                            },
                            grid: { color: 'rgba(79, 195, 247, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#e4e4e4', font: { size: 11 } },
                            grid: { display: false }
                        }
                    }
                }
            });
            
            // Repair Type Distribution
            new Chart(document.getElementById('repairTypeChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Accidental Damage', 'Non-Accidental'],
                    datasets: [{
                        data: [totalAccidental, totalRepairs - totalAccidental],
                        backgroundColor: ['#ba68c8', '#4fc3f7'],
                        borderColor: '#1a2d47',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#e4e4e4', padding: 15 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw;
                                    const percentage = ((value / totalRepairs) * 100).toFixed(1);
                                    return `${context.label}: ${value.toLocaleString()} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Cost Distribution
            const majorCost = totalMajor * 100;
            const minorCost = totalMinor * 50;
            const npuCost = totalNPU * 20;
            
            new Chart(document.getElementById('costChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Major ($100)', 'Minor ($50)', 'NPU/NPF ($20)'],
                    datasets: [{
                        data: [majorCost, minorCost, npuCost],
                        backgroundColor: ['#e57373', '#ffb74d', '#4fc3f7'],
                        borderColor: '#1a2d47',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#e4e4e4', padding: 15 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': $' + context.raw.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // Accidental Damage Chart
            new Chart(document.getElementById('accidentalChart'), {
                type: 'bar',
                data: {
                    labels: byAccidental.slice(0, 15).map(d => d.shortName),
                    datasets: [{
                        label: 'Accidental %',
                        data: byAccidental.slice(0, 15).map(d => parseFloat(d.accidentalPct)),
                        backgroundColor: purpleGradient,
                        borderColor: purpleGradient,
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'Accidental Damage % of Repairs', color: '#90a4ae' },
                            ticks: { color: '#90a4ae' },
                            grid: { color: 'rgba(79, 195, 247, 0.1)' }
                        },
                        y: {
                            ticks: { color: '#e4e4e4', font: { size: 11 } },
                            grid: { display: false }
                        }
                    }
                }
            });
            
            // Warranty Status Chart
            new Chart(document.getElementById('warrantyChart'), {
                type: 'doughnut',
                data: {
                    labels: ['In Warranty', 'Out of Warranty'],
                    datasets: [{
                        data: [totalInWarranty, totalOutWarranty],
                        backgroundColor: ['#81c784', '#e57373'],
                        borderColor: '#1a2d47',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { color: '#e4e4e4', padding: 15 }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const value = context.raw;
                                    const total = totalInWarranty + totalOutWarranty;
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${context.label}: ${value.toLocaleString()} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Generate Insights
            const insights = [
                {
                    icon: '‚ö†Ô∏è',
                    title: `Highest Repair Rate: ${byRepairRate[0].model}`,
                    text: `At ${byRepairRate[0].repairRate}% repair rate with ${byRepairRate[0].total.toLocaleString()} repairs from ${byRepairRate[0].sold.toLocaleString()} units sold. This model requires attention for quality improvement.`
                },
                {
                    icon: '‚úÖ',
                    title: `Most Reliable: ${byReliable[0].model}`,
                    text: `Only ${byReliable[0].repairRate}% repair rate with just ${byReliable[0].total.toLocaleString()} repairs from ${byReliable[0].sold.toLocaleString()} units sold. Excellent reliability performance.`
                },
                {
                    icon: 'üí∞',
                    title: `Highest Repair Cost: ${byCost[0].model}`,
                    text: `Estimated total repair cost of $${byCost[0].totalCost.toLocaleString()} with ${byCost[0].major.toLocaleString()} major, ${byCost[0].minor.toLocaleString()} minor, and ${byCost[0].npu.toLocaleString()} NPU/NPF repairs.`
                },
                {
                    icon: 'üí•',
                    title: `Accidental Damage Analysis`,
                    text: `${((totalAccidental / totalRepairs) * 100).toFixed(1)}% of all repairs are classified as accidental damage (${totalAccidental.toLocaleString()} of ${totalRepairs.toLocaleString()} total repairs). VX11 has highest at ${byAccidental[0].accidentalPct}%.`
                },
                {
                    icon: 'üìã',
                    title: `Warranty Status Overview`,
                    text: `${((totalInWarranty / (totalInWarranty + totalOutWarranty)) * 100).toFixed(1)}% of repairs occur while devices are still in warranty (${totalInWarranty.toLocaleString()} in warranty vs ${totalOutWarranty.toLocaleString()} out of warranty).`
                },
                {
                    icon: 'üìä',
                    title: `Cost Breakdown Summary`,
                    text: `Major repairs: $${majorCost.toLocaleString()} (${((majorCost / totalCost) * 100).toFixed(1)}%), Minor repairs: $${minorCost.toLocaleString()} (${((minorCost / totalCost) * 100).toFixed(1)}%), NPU/NPF: $${npuCost.toLocaleString()} (${((npuCost / totalCost) * 100).toFixed(1)}%).`
                },
                {
                    icon: 'üèÜ',
                    title: `Gen2 Models Performing Well`,
                    text: `The newer NL73TW Gen2 and NL73 Gen2 models show excellent reliability with repair rates under 0.5%. Early indicators suggest improved build quality.`
                }
            ];
            
            document.getElementById('insightsList').innerHTML = insights.map(i => `
                <div class="insight-item">
                    <div class="insight-icon">${i.icon}</div>
                    <div class="insight-text">
                        <h4>${i.title}</h4>
                        <p>${i.text}</p>
                    </div>
                </div>
            `).join('');
            
            // Populate Tables
            function getRateBadge(rate) {
                rate = parseFloat(rate);
                if (rate > 10) return `<span class="badge badge-danger">${rate}%</span>`;
                if (rate > 5) return `<span class="badge badge-warning">${rate}%</span>`;
                return `<span class="badge badge-success">${rate}%</span>`;
            }
            
            function formatCurrency(val) {
                return '$' + val.toLocaleString();
            }
            
            // Worst table (highest repair rate)
            document.getElementById('worstTable').innerHTML = byRepairRate.slice(0, 15).map(d => `
                <tr>
                    <td>${d.model}</td>
                    <td>${d.item}</td>
                    <td>${d.sold.toLocaleString()}</td>
                    <td>${d.total.toLocaleString()}</td>
                    <td>${getRateBadge(d.repairRate)}</td>
                    <td>${formatCurrency(d.totalCost)}</td>
                </tr>
            `).join('');
            
            // Best table (lowest repair rate)
            document.getElementById('bestTable').innerHTML = byReliable.slice(0, 15).map(d => `
                <tr>
                    <td>${d.model}</td>
                    <td>${d.item}</td>
                    <td>${d.sold.toLocaleString()}</td>
                    <td>${d.total.toLocaleString()}</td>
                    <td>${getRateBadge(d.repairRate)}</td>
                    <td>${formatCurrency(d.totalCost)}</td>
                </tr>
            `).join('');
            
            // Cost table
            document.getElementById('costTable').innerHTML = byCost.slice(0, 15).map(d => `
                <tr>
                    <td>${d.model}</td>
                    <td>${d.sold.toLocaleString()}</td>
                    <td>${d.total.toLocaleString()}</td>
                    <td>${getRateBadge(d.repairRate)}</td>
                    <td>${formatCurrency(d.totalCost)}</td>
                </tr>
            `).join('');
            
            // Accidental table
            document.getElementById('accidentalTable').innerHTML = byAccidental.slice(0, 15).map(d => `
                <tr>
                    <td>${d.model}</td>
                    <td>${d.accidental.toLocaleString()}</td>
                    <td>${d.total.toLocaleString()}</td>
                    <td>${d.accidentalPct}%</td>
                </tr>
            `).join('');
            
            // Warranty table
            const byWarranty = [...warrantyData].filter(d => (d.inWarranty + d.outWarranty) > 0)
                .sort((a, b) => parseFloat(b.outWarrantyPct) - parseFloat(a.outWarrantyPct));
            document.getElementById('warrantyTable').innerHTML = byWarranty.slice(0, 15).map(d => `
                <tr>
                    <td>${d.model}</td>
                    <td>${d.inWarranty.toLocaleString()}</td>
                    <td>${d.outWarranty.toLocaleString()}</td>
                    <td>${d.inWarrantyPct}%</td>
                    <td>${d.outWarrantyPct}%</td>
                </tr>
            `).join('');
            
            // All models table
            document.getElementById('allTable').innerHTML = warrantyData.sort((a,b) => b.totalCost - a.totalCost).map(d => `
                <tr>
                    <td>${d.model}</td>
                    <td>${d.item}</td>
                    <td>${d.sold.toLocaleString()}</td>
                    <td>${d.major}</td>
                    <td>${d.minor}</td>
                    <td>${d.npu}</td>
                    <td>${d.accidental}</td>
                    <td>${d.total}</td>
                    <td>${getRateBadge(d.repairRate)}</td>
                    <td>${formatCurrency(d.totalCost)}</td>
                </tr>
            `).join('');
        }
        
        // Tab functionality
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Focus password input on load
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('passwordInput').focus();
        });
    </script>
</body>
</html>
